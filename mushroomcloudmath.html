<!DOCTYPE html>
<html>
    <head>
        <title>Mushroom Cloud Math</title>
        <link rel="stylesheet" href="style.css">

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/vs2015.min.css">
    </head>
    <body>
        <h1>Completionists Mushroom Cloud</h1>
        <p>Note: Check out <a href="mushroomcloudtheory.html">Mushroom Cloud Theory</a> before reading.</p>
        <p>A <s>fun and interesting</s> guide to the math and setup of a mushroom cloud.</p>
        <hr>
        <p>
            The Mushroom Cloud can be split into <s>3</s> 2 parts:
            <li>The swirly vortex part, lets call it 'A'.</li> 
            <li>The shaft thingy, lets call it 'B'.</li><br>
            Now we can focus on each part separately and then glue em' together
            later.
        </p>
        <h2>Part A: THE PILLAR OF SMOKE</h2>
        <p>
            This 'pillar' must acclomplish two things: curving up, and rising
            up. This curve can be modeled quite simply really:
            3^(2x-3)
        </p>
        <div class="imgcap">
            <img src="assets/img/32x3.png" style="height: 25em;">
            <p>Graph of the function. As you can tell the smoke particle(s)
                would start off at a smooth rate and then basically go
                vertical.
            </p>
        </div>

        <p>And thats it! As in the basic motion is done. You dont want to have
            to deal with the logistics of creating particles constantly to
            keep the pillar going. Instead, create a variable like:
        </p>

        <pre><code class="language-java" style="border-radius: 5px; display: inline-block;">
public void partA() {
    // Convert elapsed ticks into a scaled time unit
    double timeInSeconds = (double) elapsedTicks / 20;

    // Calculate particle height based on an exponential function
    double particleHeight = Math.pow(3, 2 * timeInSeconds - 3);
    double previousParticleHeight = Math.pow(3, 2 * timeInSeconds - 3 - 0.1); // Offset by 1/10 for previous height

    // Define color interpolation start and end values
    float rStart = 115, rEnd = 255;
    float gStart = 115, gEnd = 75;
    float bStart = 115, bEnd = 0;

    // Interpolate colors over time based on elapsedTicks
    float progress = (float) elapsedTicks / resetTick;
    this.rCol = ((rStart + progress * (rEnd - rStart)) / 255);
    this.gCol = ((gStart + progress * (gEnd - gStart)) / 255);
    this.bCol = ((bStart + progress * (bEnd - bStart)) / 255);

    // Compute directional movement based on height change
    double deltaX = 1.0 / 20.0;
    double deltaY = particleHeight - previousParticleHeight;
    double magnitude = Math.sqrt(deltaX * deltaX + deltaY * deltaY);

    // Normalize and scale movement
    deltaX = (deltaX / magnitude) * 0.5;
    deltaY = (deltaY / magnitude) * 0.5;

    // Update particle position along the defined path
    py += deltaY;
    pz -= deltaX;

    // Relative position calculations for transformation
    double relativeX = px - ox;
    double relativeY = py - oy;
    double relativeZ = pz - oz;

    // Apply rotation transformation (around x-axis)
    double rotatedX = relativeX * Math.cos(xRot) - relativeZ * Math.sin(xRot);
    double rotatedZ = relativeX * Math.sin(xRot) + relativeZ * Math.cos(xRot);

    // Apply additional offsets
    rotatedX += offX;
    rotatedZ += offZ;

    // Set final particle position
    this.setPos(ox + rotatedX, oy + relativeY, oz + rotatedZ);
}
        </code></pre>

        <p>
            Now we can use this as our x variable in the above function. I
            would recommend fiddling with the function and <pc>elapsedTicks</pc>
            to make the speed of the particle constant. Here is how I implemented
            the function:
        </p>

        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
        <script>
            hljs.highlightAll();
        </script>
    </body>
</html>